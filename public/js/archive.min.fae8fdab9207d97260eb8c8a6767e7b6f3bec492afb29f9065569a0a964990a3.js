(function(){function b(){var c=0,b={},e=window.location.search.substring(1),d=e.split('&'),a;for(c=0;c<d.length;c++)a=d[c].split('='),typeof b[a[0]]=='undefined'?b[a[0]]=a[1]:typeof b[a[0]]=='string'?b[a[0]]=[b[a[0]],a[1]]:b[a[0]].push(a[1]);return b}var a=function(){var a=window.location.href.split('?')[0];return function(b){typeof b=='string'?window.history.replaceState(null,'',a+b):window.history.replaceState(null,'',a)}}();$(document).ready(function(){var f=$('.js-tags'),o=f.find('.tag-button'),g=f.find('.tag-button--all'),h=$('.js-result'),d=h.find('section'),c=[],e=null,l=[],k=!1,p,q;d.each(function(){c.push($(this).find('.item'))});function n(){var a,b=0;for(a=0;a<d.length;a++)l.push(b),b+=d.eq(a).find('.item').length;l.push(b)}function m(a){if(!a)return g;var b=o.filter('[data-encode="'+a+'"]');return b.length===0?g:b}function i(a){a&&(a.addClass('focus'),e&&!e.is(a)&&e.removeClass('focus'),e=a)}function j(g,o){var f={},n,b,e,l,j,p;for(b=0;b<c.length;b++){n=c[b];for(e=0;e<n.length;e++)if(g===''||g===void 0)f[b]||(f[b]={}),f[b][e]=!0;else{p=n.eq(e).data('tags').split(',');for(l=0;l<p.length;l++)if(p[l]===g){f[b]||(f[b]={}),f[b][e]=!0;break}}}for(b=0;b<c.length;b++){f[b]&&d.eq(b).removeClass('d-none'),f[b]||d.eq(b).addClass('d-none');for(e=0;e<c[b].length;e++)f[b]&&f[b][e]?c[b].eq(e).removeClass('d-none'):c[b].eq(e).addClass('d-none')}k||(h.removeClass('d-none'),k=!0),o?(i(o),j=o.attr('data-encode'),j===''||typeof j!='string'?a():a('?tag='+j)):i(m(g))}p=b(),q=p.tag,n(),j(q),f.on('click','a',function(){j($(this).data('encode'),$(this))})})})()